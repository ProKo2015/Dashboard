<!DOCTYPE html>
<html> 
	<head>
	
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Healthcare Praxisprojekt</title>
		<meta name="author" content="healthcare praxisprojekt">
		<link href="css/bootstrap.css" rel="stylesheet">
		<link href="js/bootstrap.min.js" rel="javascript"> 
		<link href="normalize.css" rel="stylesheet">
		<script src="jquery-2.1.4.min.js"></script>
		<script src="d3.min.js"></script> 
		<script src="http://d3js.org/d3.v3.js"></script>
		<script src="http://d3js.org/d3.v3.min.js"></script>
		<!--<link href="d3.css" rel="stylesheet">-->
		<link href="styles.css" rel="stylesheet">
		<script src="d3.layout.cloud.js"></script>
		
		 <!-- JQuery-->
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<script src="jquery-2.1.4.min.js"></script>
		<script src="jquery.mobile-1.4.5.min.js"></script>
		<link rel="stylesheet" type="text/css" href="jquery.mobile-1.4.5.min.css" />
		
	
		
	</head>
<style>

path { 
	
	stroke-width: 2;
	fill: none;
}


.axis path,
.axis line {
	fill: none;
	stroke: grey;
	stroke-width: 1;
	shape-rendering: crispEdges;
}


div.tooltip {
  position: absolute;	
  text-align: center;	
  width: 70px;	
  height: 45px;		
  padding: 2px;	
  font: 12px sans-serif;	
  background: lightgrey;	
  border: 0px;					
  border-radius: 8px;
 
	
}
</style>	
<body>

<div id="wrapper">
<!-- Navigation -->

		<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
            <div class="navbar-header">
			<!-- optional: HealthCare -->
            </div>
            <div class="collapse navbar-collapse navbar-ex1-collapse">
                <ul class="nav navbar-nav side-nav" id="sidebar" class="collapse-in"">
					<div class="panel-group" id="accordion">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne"><span class="glyphicon glyphicon-home">
                            </span><a href="index.html" target="_self">Dashboard</a></a>
                        </h4>
                    </div>
				</div>
				
				<div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo"><span class="glyphicon glyphicon-comment">
                            </span><a href="pagealle.html" target="_self">Kommentare</a></a>
                        </h4>
                    </div>
				</div>
				
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            <a data-toggle="collapse" data-parent="#accordion" href="#collapseThree"><span class="glyphicon glyphicon-cloud">
                            </span><a href="wordcloud.html" target="_self">Wordcloud</a></a>
                        </h4>
                    </div>
                </div>
				
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            <a data-toggle="collapse" data-parent="#accordion" href="#collapseFour"><span class="glyphicon glyphicon-tasks">
                            </span>Vergleiche<span class="caret"></span></a>
                        </h4>
                    </div>
                    
                        <div class="accordion-panel-body">
                            <table class="table">
								<tr>
									<td>
									    <a href="bereiche.html" target="_self">Einzelne Bereiche </a>
									</td>
								</tr>	
                                <tr>
                                    <td>
                                        <a href="pagetragerschaft.html" target="_self">Trägerschaft Intern</a>
                                    </td>
                                </tr>
                                <tr>
                                    <td id="aktuell">
                                        <a href="pageregion.html" target="_self">Region</a>
                                    </td>
                                </tr>
								
								<tr>
                                    <td>
                                        <a href="jahr.html" target="_self">Jahresübersicht</a>
                                    </td>
                                </tr>
                                <tr>
                               
                            </table>
                        </div>
                    
                </div>
            </div>
                </ul>
				
                <ul class="nav navbar-nav navbar-user">
				
			<li>
		    <a data-toggle="collapse" href="#sidebar"><i class="glyphicon glyphicon-menu-hamburger" id="hamburgerbutton"></i></a>
		    </li>
						<li class="dropdown">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown"> St. Martinus-Krankenhaus Düsseldorf <span class="badge"></span> <b class="caret"></b></a>
                        <ul class="dropdown-menu">
						    <li> Wahl des Krankenhauses <span class="badge"></span></li>
                            <li class="divider"></li>
                            <li> <a href="#"> Universitätsklinikum Düsseldorf<span class="badge"></span></a> </li>
                            <li class="divider"></li>
							<li> <a href="#"> Klinikum Dortmund GmbH <span class="bagde"></span></a></li>
                            <li class="divider"></li>
                            <li><a href="#"> St. Josef Krankenhaus GmbH<span class="badge"></span></a></li>
							    <li class="divider"></li>
                            <li><a href="#"> Alexianer Krefeld GmbH Maria-Hilf<span class="badge"></span></a></li>
							    <li class="divider"></li>
                            <li><a href="#"> Katholisches Klinikum Essen Philippusstift<span class="badge"></span></a></li>
							 <li class="divider"></li>
                            <li><a href="startseite.html"> Zurück zur Startseite<span class="badge"></span></a></li>
							
                        </ul>
						</li>
						</ul>
						
						<ul class="nav navbar-nav navbar-right">
						
						<li>
						<img src="Logo_HSMM.png" id="logo"> </img>
						</li>
						
						<li>
						<form class="navbar-form navbar-right" role="search">
						<div class="form-group navbar-right" >
						<input type="text" class="form-control" placeholder="Suchen...">
						</div>
						</form> 
						</li>
						
						</ul>
                   
		
		
        

				
                
            
        </nav>
 

			
<!-- Inhalt -->

      <div id="page-wrapper>
          
		<!-- obere Hälfte --> 
		<div class="row">
		   <div class="col-lg-12">
		   
		   <div class="panel panel-default">
			  <div class="panel-heading"> <h4> Hier sehen Sie Ihre Klinik im Vergleich zu den anderen Ihrer Region </h4> </div>
			  <div class="grafik-panel-body">
				<div class="container" id="balken"> </div>
			  
		   
		<script>
		
		var margin = {top: 20, right: 20, bottom: 100, left: 75},
		    width = 800 - margin.left - margin.right,
		    height = 500 - margin.top - margin.bottom;
			
		

		var x = d3.scale.ordinal()
		    .rangeRoundBands([0, width], .5);

		var y = d3.scale.linear()
		    .range([height, 0]);

		var xAxis = d3.svg.axis()
		    .scale(x)
		    .orient("bottom")
			;
			
	/* EINGEFÜGT UNTEN: ODER um Beschriftung zu drehen: svg.append("g")
        .attr("class", "x axis")
        .attr("transform", "translate(0," + height + ")")
        .call(xAxis)
        .selectAll("text")  
            .style("text-anchor", "end")
            .attr("dx", "-.8em")
            .attr("dy", ".15em")
            .attr("transform", function(d) {
                return "rotate(-65)" 
                }); */

		var yAxis = d3.svg.axis()
		    .scale(y)
		    .orient("left")
		    .ticks(20);
		
		var svg = d3.select("div#balken").append("svg")
		    .attr("width", width + margin.left + margin.right)
		    .attr("height", height + margin.top + margin.bottom)
		  .append("g")
		    .attr("transform", "translate(" + margin.left + "," + margin.top + ")")
			//.attr("fill", function(d, i) { return color(i); } );

				d3.json("http://134.91.18.177:5000/diagramm_re", function(error, data) {
		  x.domain(data.map(function(d) { return d.krankenhaus; }));
		  y.domain([0, d3.max(data, function(d) { return d.rating_gesamt; })]); //einbindung des DatenArrays
		  
		  
		

		  svg.append("g")
		      .attr("class", "x axis")
		      .attr("transform", "translate(0," + height + ")")
		      .call(xAxis)
			  .selectAll("text")  
            .style("text-anchor", "end")
            .attr("dx", "-.8em")
            .attr("dy", ".15em")
            .attr("transform", function(d) {
                return "rotate(-15)" 
                });

		  svg.append("g")
		      .attr("class", "y axis")
		      .call(yAxis)
		    .append("text")
		      .attr("transform", "rotate(-90)")
		      .attr("y", 6)
		      .attr("dy", ".71em")
		      .style("text-anchor", "end")
		      .text("Bewertung in Prozent");

		  svg.selectAll(".bar")
		      .data(data)
		    .enter().append("rect")
		      .attr("class", "bar")
		      .attr("x", function(d) { return x(d.krankenhaus); })
		      .attr("width", x.rangeBand())
		      .attr("y", function(d) { return y(d.rating_gesamt); })
		      .attr("height", function(d) { return height - y(d.rating_gesamt);})
			  .attr("fill", function (d) {
				if(d.rating_gesamt >=75) return "#00ff00";
						else if (d.rating_gesamt >= 50) return "#B5B5B5";
							else return "#EE0000";
							});
				
			  
                                       

		});

		function type(d) {
		  d.rating_gesamt = +d.rating_gesamt;
		  return d;
		}
		//http://bl.ocks.org/mbostock/3885304
		</script>
	</div>
			</div>

				
			</div>
			
			</div>

		</div> <!-- Ende row-->
					
				<!-- untere Hälfte --> 
			
			</div> <!-- Ende Page-Wrapper -->

       
		
		<!-- /#wrapper -->
		</div>
 
 

  
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/bootstrap.min.js"></script>

	<script >

	<!-- zum Verstecken von Inhalten -->
	
	$(document).ready(function(){
    $(".btn-primary").click(function(){
        $(".collapse").collapse('toggle');
    });
    $(".btn-success").click(function(){
        $(".collapse").collapse('show');
    });
    $(".btn-warning").click(function(){
        $(".collapse").collapse('hide');
    });
});

	</script>
</body>
</html>